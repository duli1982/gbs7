<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Tip Test - Randstad GBS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="shared/hub-button.css">
    <link rel="stylesheet" href="shared/daily-tips-styles.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&family=Roboto:wght@400;500&display=swap"
        rel="stylesheet">
    <style>
        .google-sans {
            font-family: 'Google Sans', sans-serif;
        }

        body {
            font-family: 'Roboto', sans-serif;
        }

        .test-section {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 2rem;
            margin: 1rem 0;
        }

        .status-box {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            font-family: monospace;
            font-size: 0.9rem;
        }

        .button {
            background: #4A90E2;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            margin: 0.5rem;
            transition: background-color 0.2s ease;
        }

        .button:hover {
            background: #357ABD;
        }

        .button.secondary {
            background: #6b7280;
        }

        .button.secondary:hover {
            background: #4b5563;
        }
    </style>
</head>

<body class="bg-gray-50 text-gray-800">

    <a href="index.html" class="hub-button">Back To Hub</a>

    <div class="container mx-auto px-4 py-12 max-w-4xl">

        <header class="text-center mb-8">
            <h1 class="google-sans text-3xl font-bold text-gray-900 mb-4">
                Daily Tip Test & Debug
            </h1>
            <p class="text-gray-600">
                Use this page to test and debug the daily tips system.
            </p>
        </header>

        <div class="test-section">
            <h2 class="google-sans text-xl font-bold text-gray-900 mb-4">Current Status</h2>
            <div class="status-box" id="status-info">
                Loading status...
            </div>

            <div class="flex flex-wrap gap-2">
                <button class="button" onclick="resetTip()">Reset Daily Tip</button>
                <button class="button secondary" onclick="refreshPage()">Refresh Page</button>
                <button class="button secondary" onclick="checkStatus()">Check Status</button>
                <button class="button secondary" onclick="clearAllData()">Clear All Data</button>
            </div>
        </div>

        <div class="test-section">
            <h2 class="google-sans text-xl font-bold text-gray-900 mb-4">Instructions</h2>
            <div class="space-y-4 text-gray-700">
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                    <h3 class="font-semibold text-blue-900 mb-2">To see the daily tip on the main page:</h3>
                    <ol class="list-decimal list-inside space-y-1 text-blue-800">
                        <li>Click "Reset Daily Tip" button above</li>
                        <li>Go to the main index.html page</li>
                        <li>The tip should appear as a banner between the search bar and module grid</li>
                        <li>If it doesn't appear, check the browser console for debug messages</li>
                    </ol>
                </div>

                <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                    <h3 class="font-semibold text-yellow-900 mb-2">Troubleshooting:</h3>
                    <ul class="list-disc list-inside space-y-1 text-yellow-800">
                        <li>Open browser developer tools (F12) and check the Console tab</li>
                        <li>Look for "Daily Tips System" messages</li>
                        <li>If the tip was dismissed today, it won't show until reset</li>
                        <li>The tip only shows once per day unless manually reset</li>
                    </ul>
                </div>

                <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                    <h3 class="font-semibold text-green-900 mb-2">Expected Behavior:</h3>
                    <ul class="list-disc list-inside space-y-1 text-green-800">
                        <li>On hub page: Compact banner with "Today's Quick Win"</li>
                        <li>On module pages: Full tip card with detailed content</li>
                        <li>Click "View Tip" to expand the banner</li>
                        <li>Click "×" to dismiss for the day</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2 class="google-sans text-xl font-bold text-gray-900 mb-4">Debug Console</h2>
            <div class="status-box" id="debug-console" style="height: 200px; overflow-y: auto;">
                Debug messages will appear here...
            </div>
        </div>

    </div>

    <script src="shared/daily-tips-system.js" defer></script>

    <script>
        // Override console.log to also show in our debug console
        const originalLog = console.log;
        const debugConsole = document.getElementById('debug-console');

        console.log = function (...args) {
            originalLog.apply(console, args);
            if (debugConsole) {
                const message = args.map(arg =>
                    typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)
                ).join(' ');
                debugConsole.innerHTML += new Date().toLocaleTimeString() + ': ' + message + '\n';
                debugConsole.scrollTop = debugConsole.scrollHeight;
            }
        };

        function resetTip() {
            localStorage.removeItem('tipDismissedToday');
            console.log('✅ Daily tip dismissal reset');
            checkStatus();
            alert('Daily tip reset! Now go to the main index.html page to see it.');
        }

        function refreshPage() {
            window.location.reload();
        }

        function checkStatus() {
            const dismissedToday = localStorage.getItem('tipDismissedToday');
            const today = new Date().toDateString();
            const progress = localStorage.getItem('dailyTipsProgress');
            const savedTips = localStorage.getItem('savedTips');

            const status = {
                'Current Date': today,
                'Dismissed Today': dismissedToday || 'No',
                'Should Show Tip': dismissedToday !== today ? 'Yes' : 'No',
                'Current Path': window.location.pathname,
                'Progress Data': progress ? 'Yes' : 'No',
                'Saved Tips': savedTips ? JSON.parse(savedTips).length + ' tips' : '0 tips'
            };

            document.getElementById('status-info').innerHTML = Object.entries(status)
                .map(([key, value]) => `${key}: ${value}`)
                .join('\n');

            console.log('Status check:', status);
        }

        function clearAllData() {
            if (confirm('This will clear all daily tip data. Are you sure?')) {
                localStorage.removeItem('tipDismissedToday');
                localStorage.removeItem('dailyTipsProgress');
                localStorage.removeItem('savedTips');
                localStorage.removeItem('tipHistory');
                localStorage.removeItem('tipAnalytics');
                console.log('🗑️ All daily tip data cleared');
                checkStatus();
            }
        }

        // Initial status check
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(checkStatus, 500);
        });
    </script>

</body>

</html>