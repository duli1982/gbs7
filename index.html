<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Randstad GBS - AI Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="shared/hub-button.css">
    <link rel="stylesheet" href="shared/mobile-menu.css">
    <link rel="stylesheet" href="shared/bookmarks.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&family=Roboto:wght@400;500&display=swap"
        rel="stylesheet">
    <style>
        /* CSS Variables for Light/Dark Theme */
        :root {
            /* Light Theme Colors */
            --bg-primary: #f8f9fa;
            --bg-secondary: #ffffff;
            --bg-tertiary: #f3f4f6;
            --bg-accent: #e8f0fe;
            --bg-hover: #f8fafc;
            
            --text-primary: #1f2937;
            --text-secondary: #4b5563;
            --text-tertiary: #6b7280;
            --text-muted: #9ca3af;
            
            --border-primary: #e5e7eb;
            --border-secondary: #d1d5db;
            --border-accent: #dadce0;
            
            --accent-primary: #4A90E2;
            --accent-secondary: #1967d2;
            --accent-hover: #357abd;
            
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --info: #3b82f6;
            
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        /* Dark Theme Colors */
        [data-theme="dark"] {
            --bg-primary: #111827;
            --bg-secondary: #1f2937;
            --bg-tertiary: #374151;
            --bg-accent: #1e3a8a;
            --bg-hover: #2d3748;
            
            --text-primary: #f9fafb;
            --text-secondary: #e5e7eb;
            --text-tertiary: #d1d5db;
            --text-muted: #9ca3af;
            
            --border-primary: #374151;
            --border-secondary: #4b5563;
            --border-accent: #4b5563;
            
            --accent-primary: #60a5fa;
            --accent-secondary: #3b82f6;
            --accent-hover: #93c5fd;
            
            --success: #34d399;
            --warning: #fbbf24;
            --error: #f87171;
            --info: #60a5fa;
            
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4), 0 2px 4px -1px rgba(0, 0, 0, 0.3);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.4), 0 4px 6px -2px rgba(0, 0, 0, 0.3);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.4), 0 10px 10px -5px rgba(0, 0, 0, 0.2);
        }

        .google-sans {
            font-family: 'Google Sans', sans-serif;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f8f9fa;
            color: #1f2937;
        }

        .hub-card {
            background-color: #ffffff;
            border: 1px solid #dadce0;
            color: #1f2937;
            transition: transform 0.2s ease, box-shadow 0.2s ease, opacity 0.3s ease, filter 0.3s ease;
        }

        .hub-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.07), 0 3px 6px rgba(0, 0, 0, 0.05);
        }

        .hub-card h3 {
            color: #1967d2;
        }

        /* Search functionality styles */
        .search-container {
            position: relative;
            max-width: 600px;
            margin: 0 auto;
        }

        .search-input {
            width: 100%;
            padding: 16px 20px 16px 50px;
            border: 2px solid var(--border-primary);
            border-radius: 50px;
            font-size: 16px;
            background: var(--bg-secondary);
            color: var(--text-primary);
            box-shadow: var(--shadow-md);
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1), var(--shadow-md);
        }

        .search-input::placeholder {
            color: var(--text-muted);
        }

        .search-icon {
            position: absolute;
            left: 18px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
            pointer-events: none;
        }

        .clear-search {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            transition: all 0.2s ease;
            opacity: 0;
            visibility: hidden;
        }

        .clear-search.visible {
            opacity: 1;
            visibility: visible;
        }

        .clear-search:hover {
            background-color: var(--bg-tertiary);
            color: var(--text-secondary);
        }

        /* Search results styles */
        .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--bg-secondary);
            border: 1px solid var(--border-primary);
            border-radius: 12px;
            box-shadow: var(--shadow-lg);
            max-height: 400px;
            overflow-y: auto;
            z-index: 50;
            margin-top: 8px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
        }

        .search-results.visible {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .search-result-item {
            padding: 12px 16px;
            border-bottom: 1px solid var(--border-primary);
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .search-result-item:hover {
            background-color: var(--bg-hover);
        }

        .search-result-item:last-child {
            border-bottom: none;
        }

        .search-result-title {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .search-result-description {
            font-size: 14px;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        .search-result-category {
            display: inline-block;
            background-color: var(--bg-accent);
            color: var(--accent-secondary);
            font-size: 12px;
            padding: 2px 8px;
            border-radius: 12px;
            margin-top: 4px;
        }

        /* Card filtering styles */
        .hub-card.filtered-out {
            opacity: 0.3;
            filter: grayscale(50%);
            transform: scale(0.95);
            pointer-events: none;
        }

        .hub-card.highlighted {
            border-color: #4A90E2;
            box-shadow: 0 0 0 2px rgba(74, 144, 226, 0.2), 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        /* Search highlight */
        .search-highlight {
            background-color: #fef08a;
            padding: 1px 2px;
            border-radius: 2px;
            font-weight: 600;
        }

        /* No results message */
        .no-results {
            text-align: center;
            padding: 40px 20px;
            color: #6b7280;
        }

        .no-results.hidden {
            display: none;
        }

        /* Search suggestions */
        .search-suggestions {
            padding: 12px 16px;
            background-color: var(--bg-hover);
            border-bottom: 1px solid var(--border-primary);
        }

        .search-suggestions-title {
            font-size: 12px;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 8px;
        }

        .search-suggestion-tag {
            display: inline-block;
            background-color: var(--border-primary);
            color: var(--text-secondary);
            font-size: 12px;
            padding: 4px 8px;
            border-radius: 12px;
            margin-right: 6px;
            margin-bottom: 4px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .search-suggestion-tag:hover {
            background-color: var(--accent-primary);
            color: white;
        }

        /* What's New Section Styles */
        .whats-new-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-primary);
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .whats-new-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
            border-color: var(--accent-primary);
        }

        .whats-new-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary));
        }

        .whats-new-badge {
            display: inline-flex;
            align-items: center;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 12px;
        }

        .badge-new {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }

        .badge-feature {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
        }

        .badge-success {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
        }

        .badge-updated {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            color: white;
        }

        .whats-new-icon {
            font-size: 1.5rem;
            margin-bottom: 8px;
        }

        .whats-new-date {
            color: #6b7280;
            font-size: 12px;
            margin-bottom: 8px;
        }

        .whats-new-title {
            font-weight: 700;
            font-size: 16px;
            color: #1f2937;
            margin-bottom: 8px;
            line-height: 1.4;
        }

        .whats-new-description {
            color: #6b7280;
            font-size: 14px;
            line-height: 1.5;
            margin-bottom: 12px;
        }

        .whats-new-category {
            display: inline-block;
            background: #f3f4f6;
            color: #4b5563;
            font-size: 11px;
            padding: 4px 8px;
            border-radius: 8px;
            font-weight: 500;
        }

        /* Announcement Bar Styles */
        .announcement-bar {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border: 1px solid #f59e0b;
            border-radius: 12px;
            padding: 16px 20px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: between;
            gap: 16px;
        }

        .announcement-bar.high-priority {
            background: linear-gradient(135deg, #fecaca, #fca5a5);
            border-color: #ef4444;
        }

        .announcement-content {
            flex: 1;
        }

        .announcement-title {
            font-weight: 700;
            color: #92400e;
            margin-bottom: 4px;
        }

        .announcement-bar.high-priority .announcement-title {
            color: #991b1b;
        }

        .announcement-description {
            color: #78350f;
            font-size: 14px;
        }

        .announcement-bar.high-priority .announcement-description {
            color: #7f1d1d;
        }

        .announcement-action {
            background: white;
            color: #92400e;
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 14px;
            text-decoration: none;
            transition: all 0.2s ease;
            border: 1px solid transparent;
        }

        .announcement-bar.high-priority .announcement-action {
            color: #991b1b;
        }

        .announcement-action:hover {
            background: #f9fafb;
            border-color: #d1d5db;
        }

        /* Collapsed/Expanded States */
        .whats-new-collapsed {
            max-height: 400px;
            overflow: hidden;
            position: relative;
        }

        .whats-new-collapsed::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 80px;
            background: linear-gradient(to top, rgba(248, 250, 252, 1), rgba(248, 250, 252, 0));
            pointer-events: none;
        }

        /* Onboarding Tour Styles */
        .tour-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            z-index: 9999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .tour-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .tour-spotlight {
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
            border: 3px solid #4A90E2;
            border-radius: 12px;
            box-shadow: 
                0 0 0 4px rgba(74, 144, 226, 0.3),
                0 0 0 99999px rgba(0, 0, 0, 0.6);
            transition: all 0.4s ease;
            pointer-events: none;
        }

        .tour-tooltip {
            position: absolute;
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15), 0 8px 20px rgba(0, 0, 0, 0.1);
            max-width: 380px;
            min-width: 300px;
            z-index: 10001;
            transform: scale(0.8) translateY(10px);
            opacity: 0;
            transition: all 0.3s ease;
        }

        .tour-tooltip.active {
            transform: scale(1) translateY(0);
            opacity: 1;
        }

        .tour-tooltip::after {
            content: '';
            position: absolute;
            width: 16px;
            height: 16px;
            background: white;
            transform: rotate(45deg);
            z-index: -1;
        }

        .tour-tooltip.position-bottom::after {
            top: -8px;
            left: 50%;
            margin-left: -8px;
        }

        .tour-tooltip.position-top::after {
            bottom: -8px;
            left: 50%;
            margin-left: -8px;
        }

        .tour-tooltip.position-left::after {
            right: -8px;
            top: 50%;
            margin-top: -8px;
        }

        .tour-tooltip.position-right::after {
            left: -8px;
            top: 50%;
            margin-top: -8px;
        }

        .tour-header {
            display: flex;
            align-items: center;
            justify-content: between;
            margin-bottom: 16px;
        }

        .tour-title {
            font-size: 18px;
            font-weight: 700;
            color: #1f2937;
            margin: 0;
            flex: 1;
        }

        .tour-step-counter {
            background: #f3f4f6;
            color: #6b7280;
            font-size: 12px;
            font-weight: 600;
            padding: 4px 10px;
            border-radius: 20px;
            margin-left: 12px;
        }

        .tour-content {
            color: #4b5563;
            line-height: 1.6;
            margin-bottom: 20px;
            white-space: pre-line;
        }

        .tour-progress {
            width: 100%;
            height: 4px;
            background: #e5e7eb;
            border-radius: 2px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .tour-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #4A90E2, #1967d2);
            border-radius: 2px;
            transition: width 0.3s ease;
        }

        .tour-controls {
            display: flex;
            gap: 12px;
            align-items: center;
            justify-content: space-between;
        }

        .tour-btn {
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
            border: none;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .tour-btn-primary {
            background: #4A90E2;
            color: white;
        }

        .tour-btn-primary:hover {
            background: #357abd;
            transform: translateY(-1px);
        }

        .tour-btn-secondary {
            background: #f3f4f6;
            color: #6b7280;
        }

        .tour-btn-secondary:hover {
            background: #e5e7eb;
            color: #374151;
        }

        .tour-btn-skip {
            background: transparent;
            color: #9ca3af;
            padding: 8px 16px;
        }

        .tour-btn-skip:hover {
            color: #6b7280;
        }

        /* Tour Animations */
        @keyframes tour-pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.8; }
        }

        @keyframes tour-highlight {
            0%, 100% { box-shadow: 0 0 0 4px rgba(74, 144, 226, 0.3); }
            50% { box-shadow: 0 0 0 8px rgba(74, 144, 226, 0.6); }
        }

        @keyframes tour-celebrate {
            0% { transform: scale(1); }
            25% { transform: scale(1.1) rotate(5deg); }
            50% { transform: scale(1.1) rotate(-5deg); }
            75% { transform: scale(1.1) rotate(5deg); }
            100% { transform: scale(1); }
        }

        .tour-pulse {
            animation: tour-pulse 1.5s ease-in-out infinite;
        }

        .tour-highlight {
            animation: tour-highlight 2s ease-in-out infinite;
        }

        .tour-celebrate {
            animation: tour-celebrate 0.6s ease-in-out;
        }

        /* Welcome Banner */
        .tour-welcome-banner {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #4A90E2, #1967d2);
            color: white;
            padding: 16px 20px;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(74, 144, 226, 0.3);
            z-index: 1000;
            transform: translateX(400px);
            opacity: 0;
            transition: all 0.3s ease;
            max-width: 320px;
        }

        .tour-welcome-banner.show {
            transform: translateX(0);
            opacity: 1;
        }

        .tour-welcome-banner h3 {
            margin: 0 0 8px 0;
            font-size: 16px;
            font-weight: 700;
        }

        .tour-welcome-banner p {
            margin: 0 0 12px 0;
            font-size: 14px;
            opacity: 0.9;
        }

        .tour-welcome-actions {
            display: flex;
            gap: 8px;
        }

        .tour-welcome-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .tour-welcome-btn.primary {
            background: white;
            color: #4A90E2;
        }

        .tour-welcome-btn.secondary {
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }

        .tour-welcome-btn:hover {
            transform: translateY(-1px);
        }

        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            .tour-tooltip {
                max-width: 280px;
                min-width: 260px;
                padding: 20px;
            }

            .tour-welcome-banner {
                top: 10px;
                right: 10px;
                left: 10px;
                max-width: none;
                transform: translateY(-100px);
            }

            .tour-welcome-banner.show {
                transform: translateY(0);
            }
        }

    </style>
</head>

<body class="bg-gray-50 text-gray-800">


    <!-- Welcome Banner -->
    <div id="tour-welcome-banner" class="tour-welcome-banner">
        <h3>Welcome to GBS Learning Hub! 👋</h3>
        <p>New here? Take a quick 30-second tour to get started.</p>
        <div class="tour-welcome-actions">
            <button id="start-tour-btn" class="tour-welcome-btn primary">Take Tour</button>
            <button id="dismiss-welcome-btn" class="tour-welcome-btn secondary">Maybe Later</button>
        </div>
    </div>

    <!-- Tour Overlay -->
    <div id="tour-overlay" class="tour-overlay">
        <div id="tour-spotlight" class="tour-spotlight"></div>
        <div id="tour-tooltip" class="tour-tooltip">
            <div class="tour-header">
                <h3 id="tour-title" class="tour-title"></h3>
                <div id="tour-step-counter" class="tour-step-counter"></div>
            </div>
            <div id="tour-progress" class="tour-progress">
                <div id="tour-progress-bar" class="tour-progress-bar"></div>
            </div>
            <div id="tour-content" class="tour-content"></div>
            <div class="tour-controls">
                <div class="tour-controls-left">
                    <button id="tour-skip-btn" class="tour-btn tour-btn-skip">Skip Tour</button>
                </div>
                <div class="tour-controls-right">
                    <button id="tour-prev-btn" class="tour-btn tour-btn-secondary">← Back</button>
                    <button id="tour-next-btn" class="tour-btn tour-btn-primary">Next →</button>
                </div>
            </div>
        </div>
    </div>

    <div class="container mx-auto px-4 py-12 md:py-20">

        <header class="text-center mb-12">
            <h1 class="google-sans text-4xl md:text-5xl font-bold text-gray-900">Randstad GBS Learning Hub</h1>
            <p class="mt-4 text-lg text-gray-600 max-w-2xl mx-auto">A central portal for our AI training programs,
                sourcing tools, and interactive workshops.</p>
        </header>

        <!-- Global Search Bar -->
        <div class="search-container mb-12">
            <div class="relative">
                <svg class="search-icon w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                </svg>
                <input type="text" id="global-search" class="search-input"
                    placeholder="Search across all modules, content, and resources..." autocomplete="off">
                <button class="clear-search" id="clear-search" title="Clear search">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12">
                        </path>
                    </svg>
                </button>

                <!-- Search Results Dropdown -->
                <div class="search-results" id="search-results">
                    <div class="search-suggestions">
                        <div class="search-suggestions-title">Popular Searches</div>
                        <span class="search-suggestion-tag" data-search="AI training">AI Training</span>
                        <span class="search-suggestion-tag" data-search="prompts">Prompts</span>
                        <span class="search-suggestion-tag" data-search="resume">Resume</span>
                        <span class="search-suggestion-tag" data-search="sourcing">Sourcing</span>
                        <span class="search-suggestion-tag" data-search="boolean">Boolean</span>
                        <span class="search-suggestion-tag" data-search="leadership">Leadership</span>
                        <span class="search-suggestion-tag" data-search="create framework">CREATE Framework</span>
                        <span class="search-suggestion-tag" data-search="automation">Automation</span>
                        <span class="search-suggestion-tag" data-search="success stories">Success Stories</span>
                    </div>
                    <div id="search-results-content">
                        <!-- Dynamic search results will appear here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- What's New Section -->
        <section id="whats-new-section" class="mb-16">
            <div class="max-w-6xl mx-auto">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="google-sans text-3xl font-bold text-gray-900">What's New</h2>
                    <button id="whats-new-toggle" class="text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center gap-2">
                        <span id="toggle-text">Show All</span>
                        <svg id="toggle-icon" class="w-4 h-4 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </button>
                </div>

                <!-- Announcements Bar (High Priority) -->
                <div id="announcements-bar" class="mb-6"></div>

                <!-- What's New Grid -->
                <div id="whats-new-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Updates will be loaded here -->
                </div>

                <!-- View All Updates Button -->
                <div class="text-center mt-8 hidden" id="view-all-container">
                    <button id="view-all-updates" class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 transition-colors duration-200">
                        View All Updates
                        <svg class="ml-2 -mr-1 w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </section>

        <main>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-8 max-w-4xl mx-auto" id="modules-grid">

                <a href="/rpo-training/" class="hub-card bg-white p-8 rounded-xl block"
                    data-keywords="rpo ai acceleration program training curriculum foundations leadership strategy modules phases">
                    <h3 class="google-sans text-2xl font-bold mb-2">RPO AI Acceleration Program</h3>
                    <p class="text-gray-600">The complete, multi-phase training curriculum for all RPO team members,
                        from AI foundations to leadership strategy.</p>
                </a>

                <a href="/gbs-ai-workshop/" class="hub-card bg-white p-8 rounded-xl block"
                    data-keywords="gbs leaders guide interactive training prompt libraries simulators case studies workshop">
                    <h3 class="google-sans text-2xl font-bold mb-2">Guide for GBS Leaders</h3>
                    <p class="text-gray-600">An interactive training for GBS leaders, complete with prompt libraries,
                        simulators, and case studies.</p>
                </a>

                <a href="/daily-focus/" class="hub-card bg-white p-8 rounded-xl block"
                    data-keywords="daily sourcing focus micro-coaching tool actionable cards talent sourcers skills">
                    <h3 class="google-sans text-2xl font-bold mb-2">Daily Sourcing Focus</h3>
                    <p class="text-gray-600">A daily micro-coaching tool with actionable focus cards designed to sharpen
                        the skills of our talent sourcers.</p>
                </a>

                <a href="/gbs-prompts/" class="hub-card bg-white p-8 rounded-xl block"
                    data-keywords="gbs ai prompts library comprehensive searchable expert prompts daily tasks professionals">
                    <h3 class="google-sans text-2xl font-bold mb-2">GBS AI Prompts Library</h3>
                    <p class="text-gray-600">A comprehensive and searchable library of expert prompts designed to
                        accelerate daily tasks for GBS professionals.</p>
                </a>

                <a href="/knowledge-content/" class="hub-card bg-white p-8 rounded-xl block"
                    data-keywords="knowledge content wealth resources information learning materials documentation">
                    <h3 class="google-sans text-2xl font-bold mb-2">Knowledge Content</h3>
                    <p class="text-gray-600">Access a wealth of knowledge content here.</p>
                </a>

                <a href="/ai-sme/" class="hub-card bg-white p-8 rounded-xl block"
                    data-keywords="ai sme subject matter expert knowledge resources artificial intelligence expertise">
                    <h3 class="google-sans text-2xl font-bold mb-2">AI SME</h3>
                    <p class="text-gray-600">Explore expert AI knowledge and resources.</p>
                </a>

                <a href="/use-cases/" class="hub-card bg-white p-8 rounded-xl block"
                    data-keywords="ai success stories real-world examples case studies transforms daily work randstad gbs impact">
                    <h3 class="google-sans text-2xl font-bold mb-2">AI Success Stories</h3>
                    <p class="text-gray-600">Real-world examples and case studies showcasing how AI transforms daily
                        work at Randstad GBS. See the impact firsthand.</p>
                </a>

                <a href="/sourcing-workshop/" class="hub-card bg-white p-8 rounded-xl block"
                    data-keywords="sourcing workshop advanced techniques market intelligence candidate engagement coming soon">
                    <h3 class="google-sans text-2xl font-bold mb-2">Sourcing Workshop</h3>
                    <p class="text-gray-600">An in-depth workshop dedicated to advanced sourcing techniques, market
                        intelligence, and candidate engagement. (Coming Soon)</p>
                </a>

            </div>

            <!-- No Results Message -->
            <div class="no-results hidden" id="no-results">
                <div class="text-center py-12">
                    <svg class="mx-auto h-12 w-12 text-gray-400 mb-4" fill="none" stroke="currentColor"
                        viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.34 0-4.47-.881-6.08-2.33">
                        </path>
                    </svg>
                    <h3 class="text-lg font-medium text-gray-900 mb-2">No results found</h3>
                    <p class="text-gray-500 mb-4">Try adjusting your search terms or browse our available modules above.
                    </p>
                    <button class="text-blue-600 hover:text-blue-800 font-medium" onclick="clearSearch()">Clear
                        search</button>
                </div>
            </div>
        </main>
    </div>

    <div id="footer-placeholder"></div>
    <script src="shared/scripts/footer.js" defer></script>

    <script>
        // Global Search Functionality with Site-wide Content Search
        class GlobalSearch {
            constructor() {
                this.searchInput = document.getElementById('global-search');
                this.clearButton = document.getElementById('clear-search');
                this.searchResults = document.getElementById('search-results');
                this.searchResultsContent = document.getElementById('search-results-content');
                this.modulesGrid = document.getElementById('modules-grid');
                this.noResults = document.getElementById('no-results');
                this.cards = document.querySelectorAll('.hub-card');

                this.searchData = [];
                this.cardData = [];
                this.loadSearchIndex();
                this.initializeEventListeners();
                this.initializeSuggestions();
            }

            async loadSearchIndex() {
                try {
                    const response = await fetch('/shared/search-index.json');
                    const data = await response.json();
                    this.searchData = data.searchIndex.map(item => ({
                        ...item,
                        searchText: `${item.title} ${item.description} ${item.keywords} ${item.content}`.toLowerCase()
                    }));

                    // Also build card data for local filtering
                    this.cardData = this.buildCardIndex();
                } catch (error) {
                    console.warn('Could not load search index, falling back to local search:', error);
                    this.searchData = this.buildCardIndex();
                    this.cardData = this.searchData;
                }
            }

            buildCardIndex() {
                const cardData = [];
                this.cards.forEach(card => {
                    const title = card.querySelector('h3').textContent;
                    const description = card.querySelector('p').textContent;
                    const keywords = card.getAttribute('data-keywords') || '';
                    const url = card.getAttribute('href');

                    cardData.push({
                        title,
                        description,
                        keywords,
                        url,
                        element: card,
                        category: this.getCategoryFromUrl(url),
                        type: 'module',
                        searchText: `${title} ${description} ${keywords}`.toLowerCase()
                    });
                });
                return cardData;
            }

            initializeEventListeners() {
                // Search input events
                this.searchInput.addEventListener('input', (e) => this.handleSearch(e.target.value));
                this.searchInput.addEventListener('focus', () => this.showSearchResults());
                this.searchInput.addEventListener('keydown', (e) => this.handleKeydown(e));

                // Clear button
                this.clearButton.addEventListener('click', () => this.clearSearch());

                // Click outside to close
                document.addEventListener('click', (e) => {
                    if (!e.target.closest('.search-container')) {
                        this.hideSearchResults();
                    }
                });

                // Escape key to close
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') {
                        this.hideSearchResults();
                        this.searchInput.blur();
                    }
                });
            }

            initializeSuggestions() {
                const suggestionTags = document.querySelectorAll('.search-suggestion-tag');
                suggestionTags.forEach(tag => {
                    tag.addEventListener('click', () => {
                        const searchTerm = tag.getAttribute('data-search');
                        this.searchInput.value = searchTerm;
                        this.handleSearch(searchTerm);
                        this.searchInput.focus();
                    });
                });
            }

            handleSearch(query) {
                const trimmedQuery = query.trim();

                // Show/hide clear button
                if (trimmedQuery) {
                    this.clearButton.classList.add('visible');
                } else {
                    this.clearButton.classList.remove('visible');
                }

                if (trimmedQuery.length === 0) {
                    this.resetView();
                    this.showSearchResults();
                    return;
                }

                if (trimmedQuery.length < 2) {
                    this.hideSearchResults();
                    return;
                }

                const results = this.performSearch(trimmedQuery);
                this.displaySearchResults(results, trimmedQuery);
                this.filterCards(results, trimmedQuery);
            }

            performSearch(query) {
                const queryLower = query.toLowerCase();
                const results = [];
                const queryWords = queryLower.split(/\s+/).filter(word => word.length > 1);

                this.searchData.forEach(item => {
                    let score = 0;
                    let matchedWords = 0;

                    // Exact phrase match in title (highest priority)
                    if (item.title.toLowerCase().includes(queryLower)) {
                        score += 20;
                    }

                    // Individual word matches in title
                    queryWords.forEach(word => {
                        if (item.title.toLowerCase().includes(word)) {
                            score += 10;
                            matchedWords++;
                        }
                    });

                    // Exact phrase match in description
                    if (item.description.toLowerCase().includes(queryLower)) {
                        score += 15;
                    }

                    // Individual word matches in description
                    queryWords.forEach(word => {
                        if (item.description.toLowerCase().includes(word)) {
                            score += 5;
                            matchedWords++;
                        }
                    });

                    // Keywords match
                    if (item.keywords && item.keywords.toLowerCase().includes(queryLower)) {
                        score += 8;
                    }

                    queryWords.forEach(word => {
                        if (item.keywords && item.keywords.toLowerCase().includes(word)) {
                            score += 3;
                            matchedWords++;
                        }
                    });

                    // Content match (for detailed content)
                    if (item.content && item.content.toLowerCase().includes(queryLower)) {
                        score += 6;
                    }

                    queryWords.forEach(word => {
                        if (item.content && item.content.toLowerCase().includes(word)) {
                            score += 2;
                            matchedWords++;
                        }
                    });

                    // Fuzzy search in all text
                    if (item.searchText.includes(queryLower)) {
                        score += 1;
                    }

                    // Bonus for matching multiple words
                    if (queryWords.length > 1 && matchedWords >= queryWords.length * 0.7) {
                        score += 5;
                    }

                    // Type-based scoring adjustments
                    if (item.type === 'module') score *= 1.2;
                    if (item.type === 'lesson') score *= 1.1;
                    if (item.type === 'prompt-category') score *= 1.15;

                    if (score > 0) {
                        results.push({ ...item, score, matchedWords });
                    }
                });

                // Sort by relevance score, then by matched words
                return results.sort((a, b) => {
                    if (b.score !== a.score) return b.score - a.score;
                    return b.matchedWords - a.matchedWords;
                });
            }

            displaySearchResults(results, query) {
                this.searchResultsContent.innerHTML = '';

                if (results.length === 0) {
                    this.searchResultsContent.innerHTML = `
                        <div class="search-result-item">
                            <div class="search-result-title">No results found for "${query}"</div>
                            <div class="search-result-description">Try different keywords like "prompts", "resume", "sourcing", or "training"</div>
                        </div>
                    `;
                } else {
                    // Show top 8 results with better categorization
                    const topResults = results.slice(0, 8);

                    // Group results by type for better organization
                    const groupedResults = this.groupResultsByType(topResults);

                    Object.entries(groupedResults).forEach(([type, items]) => {
                        if (items.length > 0) {
                            // Add type header for multiple types
                            if (Object.keys(groupedResults).length > 1 && items.length > 1) {
                                const header = document.createElement('div');
                                header.className = 'search-result-header';
                                header.innerHTML = `<div style="padding: 8px 16px; background: #f8fafc; font-weight: 600; font-size: 12px; color: #6b7280; text-transform: uppercase;">${this.getTypeDisplayName(type)}</div>`;
                                this.searchResultsContent.appendChild(header);
                            }

                            items.forEach(result => {
                                const resultElement = this.createSearchResultElement(result, query);
                                this.searchResultsContent.appendChild(resultElement);
                            });
                        }
                    });
                }

                this.showSearchResults();
            }

            groupResultsByType(results) {
                const groups = {
                    'module': [],
                    'lesson': [],
                    'prompt-category': [],
                    'use-case': [],
                    'utility': []
                };

                results.forEach(result => {
                    const type = result.type || 'module';
                    if (groups[type]) {
                        groups[type].push(result);
                    } else {
                        groups['module'].push(result);
                    }
                });

                // Remove empty groups
                Object.keys(groups).forEach(key => {
                    if (groups[key].length === 0) {
                        delete groups[key];
                    }
                });

                return groups;
            }

            getTypeDisplayName(type) {
                const typeNames = {
                    'module': 'Main Modules',
                    'lesson': 'Training Lessons',
                    'prompt-category': 'Prompt Categories',
                    'use-case': 'Success Stories',
                    'utility': 'Tools & Support'
                };
                return typeNames[type] || 'Content';
            }

            createSearchResultElement(result, query) {
                const div = document.createElement('div');
                div.className = 'search-result-item';

                const highlightedTitle = this.highlightText(result.title, query);
                const highlightedDescription = this.highlightText(result.description, query);

                // Section title display
                const sectionDisplay = result.sectionTitle
                    ? `<div class="search-result-section" style="font-size: 12px; color: #1967d2; font-weight: 500; margin-top: 4px;">↳ In: ${this.highlightText(result.sectionTitle, query)}</div>`
                    : '';

                div.innerHTML = `
                    <div class="search-result-title">${highlightedTitle}</div>
                    <div class="search-result-description">${highlightedDescription}</div>
                    ${sectionDisplay}
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 4px;">
                        <span class="search-result-category">${result.category || this.getCategoryFromUrl(result.url)}</span>
                        ${result.type === 'lesson' ? '<span style="font-size: 11px; color: #9ca3af;">📚 Lesson</span>' : ''}
                        ${result.type === 'prompt-category' ? '<span style="font-size: 11px; color: #9ca3af;">🎯 Prompts</span>' : ''}
                        ${result.type === 'use-case' ? '<span style="font-size: 11px; color: #9ca3af;">📈 Case Study</span>' : ''}
                    </div>
                `;

                div.addEventListener('click', () => {
                    this.handleResultClick(result);
                });

                return div;
            }

            handleResultClick(result) {
                // The full implementation with smooth scrolling will be in the next step.
                // For now, this just navigates to the URL with anchor.
                const targetUrl = result.anchor ? `${result.url}#${result.anchor}` : result.url;
                window.location.href = targetUrl;
            }

            highlightText(text, query) {
                if (!query) return text;
                const regex = new RegExp(`(${query.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')})`, 'gi');
                return text.replace(regex, '<span class="search-highlight">$1</span>');
            }

            getCategoryFromUrl(url) {
                const categoryMap = {
                    'rpo-training': 'Training Program',
                    'gbs-ai-workshop': 'Leadership Workshop',
                    'daily-focus': 'Daily Tools',
                    'gbs-prompts': 'Prompt Library',
                    'knowledge-content': 'Knowledge Base',
                    'ai-sme': 'Expert Resources',
                    'use-cases': 'Success Stories',
                    'sourcing-workshop': 'Workshop'
                };

                for (const [key, value] of Object.entries(categoryMap)) {
                    if (url.includes(key)) return value;
                }
                return 'Module';
            }

            filterCards(results, query) {
                // Get matching URLs from both site-wide results and card data
                const siteWideUrls = new Set(results.map(r => r.url));
                const cardMatchingUrls = new Set();

                // Also check card data for local matches
                this.cardData.forEach(cardItem => {
                    if (cardItem.searchText.includes(query.toLowerCase())) {
                        cardMatchingUrls.add(cardItem.url);
                    }
                });

                // Combine both sets
                const allMatchingUrls = new Set([...siteWideUrls, ...cardMatchingUrls]);

                this.cards.forEach(card => {
                    const cardUrl = card.getAttribute('href');
                    const isMainModuleMatch = allMatchingUrls.has(cardUrl);
                    const hasRelatedContent = results.some(r => r.url.startsWith(cardUrl));

                    if (query.length === 0 || isMainModuleMatch || hasRelatedContent) {
                        // Show matching cards
                        card.classList.remove('filtered-out');
                        if (query.length > 0) {
                            card.classList.add('highlighted');
                            // Highlight text in cards
                            this.highlightCardText(card, query);
                        } else {
                            card.classList.remove('highlighted');
                            this.removeCardHighlights(card);
                        }
                    } else {
                        // Hide non-matching cards
                        card.classList.add('filtered-out');
                        card.classList.remove('highlighted');
                    }
                });

                // Show/hide no results message for main modules
                const hasMainModuleResults = Array.from(this.cards).some(card =>
                    !card.classList.contains('filtered-out')
                );

                if (query.length > 0 && !hasMainModuleResults && results.length === 0) {
                    this.noResults.classList.remove('hidden');
                    this.modulesGrid.style.opacity = '0.3';
                } else {
                    this.noResults.classList.add('hidden');
                    this.modulesGrid.style.opacity = '1';
                }
            }

            highlightCardText(card, query) {
                const title = card.querySelector('h3');
                const description = card.querySelector('p');

                if (!title.getAttribute('data-original')) {
                    title.setAttribute('data-original', title.innerHTML);
                    description.setAttribute('data-original', description.innerHTML);
                }

                title.innerHTML = this.highlightText(title.getAttribute('data-original'), query);
                description.innerHTML = this.highlightText(description.getAttribute('data-original'), query);
            }

            removeCardHighlights(card) {
                const title = card.querySelector('h3');
                const description = card.querySelector('p');

                if (title.getAttribute('data-original')) {
                    title.innerHTML = title.getAttribute('data-original');
                    description.innerHTML = description.getAttribute('data-original');
                }
            }

            showSearchResults() {
                this.searchResults.classList.add('visible');
            }

            hideSearchResults() {
                this.searchResults.classList.remove('visible');
            }

            clearSearch() {
                this.searchInput.value = '';
                this.clearButton.classList.remove('visible');
                this.resetView();
                this.hideSearchResults();
                this.searchInput.focus();
            }

            resetView() {
                // Reset all cards
                this.cards.forEach(card => {
                    card.classList.remove('filtered-out', 'highlighted');
                    this.removeCardHighlights(card);
                });

                // Hide no results
                this.noResults.classList.add('hidden');
                this.modulesGrid.style.opacity = '1';
            }

            handleKeydown(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    const firstResult = this.searchResultsContent.querySelector('.search-result-item');
                    if (firstResult) {
                        firstResult.click();
                    }
                }
            }
        }

        // Global function for clear search (used by no results button)
        function clearSearch() {
            if (window.globalSearch) {
                window.globalSearch.clearSearch();
            }
        }

        // What's New functionality
        class WhatsNewManager {
            constructor() {
                this.whatsNewData = null;
                this.isExpanded = false;
                this.maxItemsCollapsed = 3;
                
                this.whatsNewGrid = document.getElementById('whats-new-grid');
                this.announcementsBar = document.getElementById('announcements-bar');
                this.whatsNewToggle = document.getElementById('whats-new-toggle');
                this.toggleText = document.getElementById('toggle-text');
                this.toggleIcon = document.getElementById('toggle-icon');
                this.viewAllContainer = document.getElementById('view-all-container');
                
                this.loadWhatsNewData();
                this.initializeEventListeners();
            }

            async loadWhatsNewData() {
                try {
                    const response = await fetch('/shared/whats-new.json');
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    this.whatsNewData = await response.json();
                    this.renderContent();
                } catch (error) {
                    console.error('Failed to load What\'s New data:', error);
                    // Hide the section if we can't load data
                    document.getElementById('whats-new-section').style.display = 'none';
                }
            }

            initializeEventListeners() {
                this.whatsNewToggle.addEventListener('click', () => this.toggleExpanded());
                
                const viewAllBtn = document.getElementById('view-all-updates');
                if (viewAllBtn) {
                    viewAllBtn.addEventListener('click', () => this.showAllUpdates());
                }
            }

            toggleExpanded() {
                this.isExpanded = !this.isExpanded;
                this.renderUpdates();
                this.updateToggleButton();
            }

            updateToggleButton() {
                if (this.isExpanded) {
                    this.toggleText.textContent = 'Show Less';
                    this.toggleIcon.style.transform = 'rotate(180deg)';
                } else {
                    this.toggleText.textContent = 'Show All';
                    this.toggleIcon.style.transform = 'rotate(0deg)';
                }
            }

            renderContent() {
                this.renderAnnouncements();
                this.renderUpdates();
                this.updateToggleButton();
            }

            renderAnnouncements() {
                if (!this.whatsNewData.announcements || this.whatsNewData.announcements.length === 0) {
                    this.announcementsBar.style.display = 'none';
                    return;
                }

                // Only show high priority announcements in the main bar
                const highPriorityAnnouncements = this.whatsNewData.announcements
                    .filter(announcement => announcement.priority === 'high')
                    .slice(0, 2); // Max 2 high priority announcements

                this.announcementsBar.innerHTML = '';

                highPriorityAnnouncements.forEach(announcement => {
                    const announcementEl = document.createElement('div');
                    announcementEl.className = `announcement-bar ${announcement.priority}-priority`;
                    
                    announcementEl.innerHTML = `
                        <div class="announcement-icon" style="font-size: 1.5rem;">${announcement.icon}</div>
                        <div class="announcement-content">
                            <div class="announcement-title">${announcement.title}</div>
                            <div class="announcement-description">${announcement.description}</div>
                        </div>
                        <a href="${announcement.actionLink}" class="announcement-action">
                            ${announcement.actionText}
                        </a>
                    `;
                    
                    this.announcementsBar.appendChild(announcementEl);
                });
            }

            renderUpdates() {
                if (!this.whatsNewData.updates || this.whatsNewData.updates.length === 0) {
                    return;
                }

                // Sort updates by date (most recent first)
                const sortedUpdates = [...this.whatsNewData.updates].sort((a, b) => 
                    new Date(b.date) - new Date(a.date)
                );

                // Determine how many items to show
                const itemsToShow = this.isExpanded ? sortedUpdates.length : this.maxItemsCollapsed;
                const updatesToShow = sortedUpdates.slice(0, itemsToShow);

                this.whatsNewGrid.innerHTML = '';

                updatesToShow.forEach(update => {
                    const updateEl = this.createUpdateCard(update);
                    this.whatsNewGrid.appendChild(updateEl);
                });

                // Show/hide "View All" button
                if (sortedUpdates.length > this.maxItemsCollapsed && !this.isExpanded) {
                    this.viewAllContainer.classList.remove('hidden');
                } else {
                    this.viewAllContainer.classList.add('hidden');
                }

                // Add collapse effect if not expanded
                if (!this.isExpanded) {
                    this.whatsNewGrid.classList.add('whats-new-collapsed');
                } else {
                    this.whatsNewGrid.classList.remove('whats-new-collapsed');
                }
            }

            createUpdateCard(update) {
                const card = document.createElement('a');
                card.href = update.link;
                card.className = 'whats-new-card block text-decoration-none';
                
                // Determine badge class
                const badgeClass = `badge-${update.type === 'new-content' ? 'new' : 
                                            update.type === 'feature' ? 'feature' : 
                                            update.type === 'success-story' ? 'success' : 'updated'}`;
                
                // Format date
                const updateDate = new Date(update.date);
                const formattedDate = this.formatDate(updateDate);
                const isRecent = this.isRecentUpdate(updateDate);
                
                card.innerHTML = `
                    <div class="whats-new-icon">${update.icon}</div>
                    <div class="whats-new-badge ${badgeClass}">
                        ${update.badge}${isRecent ? ' • NEW' : ''}
                    </div>
                    <div class="whats-new-date">${formattedDate}</div>
                    <h3 class="whats-new-title">${update.title}</h3>
                    <p class="whats-new-description">${update.description}</p>
                    <span class="whats-new-category">${update.category}</span>
                `;
                
                // Add click tracking
                card.addEventListener('click', (e) => {
                    this.trackUpdateClick(update);
                });
                
                return card;
            }

            formatDate(date) {
                const now = new Date();
                const diffTime = Math.abs(now - date);
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                
                if (diffDays <= 1) {
                    return 'Today';
                } else if (diffDays <= 7) {
                    return `${diffDays} days ago`;
                } else if (diffDays <= 30) {
                    return `${Math.ceil(diffDays / 7)} weeks ago`;
                } else {
                    return date.toLocaleDateString('en-US', { 
                        month: 'short', 
                        day: 'numeric',
                        year: date.getFullYear() !== now.getFullYear() ? 'numeric' : undefined
                    });
                }
            }

            isRecentUpdate(date) {
                const now = new Date();
                const diffTime = Math.abs(now - date);
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                return diffDays <= 7; // Consider updates within 7 days as recent
            }

            trackUpdateClick(update) {
                // Track which updates users are clicking on
                console.log('Update clicked:', update.title);
                // This could be connected to analytics
            }

            showAllUpdates() {
                // This could navigate to a dedicated "All Updates" page
                // For now, we'll just expand the current view
                if (!this.isExpanded) {
                    this.toggleExpanded();
                }
            }
        }

        // Onboarding Tour System
        class OnboardingTour {
            constructor() {
                this.tourData = null;
                this.currentStep = 0;
                this.isActive = false;
                this.elements = {
                    welcomeBanner: document.getElementById('tour-welcome-banner'),
                    overlay: document.getElementById('tour-overlay'),
                    spotlight: document.getElementById('tour-spotlight'),
                    tooltip: document.getElementById('tour-tooltip'),
                    title: document.getElementById('tour-title'),
                    content: document.getElementById('tour-content'),
                    stepCounter: document.getElementById('tour-step-counter'),
                    progressBar: document.getElementById('tour-progress-bar'),
                    startBtn: document.getElementById('start-tour-btn'),
                    dismissBtn: document.getElementById('dismiss-welcome-btn'),
                    skipBtn: document.getElementById('tour-skip-btn'),
                    prevBtn: document.getElementById('tour-prev-btn'),
                    nextBtn: document.getElementById('tour-next-btn')
                };

                this.loadTourData();
                this.initializeEventListeners();
                this.checkFirstVisit();
            }

            async loadTourData() {
                try {
                    const response = await fetch('/shared/onboarding-tour.json');
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    this.tourData = await response.json();
                    console.log('Tour data loaded:', this.tourData); // Debug
                } catch (error) {
                    console.error('Failed to load tour data:', error);
                    // Show welcome banner for debugging even if tour data fails
                    if (this.elements.welcomeBanner) {
                        this.elements.welcomeBanner.style.display = 'block';
                        this.elements.welcomeBanner.classList.add('show');
                    }
                }
            }

            initializeEventListeners() {
                // Welcome banner buttons
                this.elements.startBtn?.addEventListener('click', () => this.startTour());
                this.elements.dismissBtn?.addEventListener('click', () => this.dismissWelcome());

                // Tour control buttons
                this.elements.skipBtn?.addEventListener('click', () => this.skipTour());
                this.elements.prevBtn?.addEventListener('click', () => this.previousStep());
                this.elements.nextBtn?.addEventListener('click', () => this.nextStep());

                // Keyboard shortcuts
                document.addEventListener('keydown', (e) => this.handleKeyboard(e));

                // Click outside to close (but not during tour)
                document.addEventListener('click', (e) => {
                    if (this.isActive && e.target === this.elements.overlay) {
                        this.skipTour();
                    }
                });
            }

            checkFirstVisit() {
                const hasVisited = localStorage.getItem('gbs-hub-visited');
                const tourCompleted = localStorage.getItem('gbs-hub-tour-completed');
                console.log('Check first visit:', { hasVisited, tourCompleted, tourData: this.tourData }); // Debug
                
                if (!hasVisited && !tourCompleted && this.tourData) {
                    // Show welcome banner after a delay
                    setTimeout(() => {
                        this.showWelcomeBanner();
                    }, 1500);
                } else if (!tourCompleted) {
                    // Add a subtle "Take Tour" option to header
                    this.addTourTriggerToHeader();
                }
            }

            showWelcomeBanner() {
                if (this.elements.welcomeBanner) {
                    this.elements.welcomeBanner.classList.add('show');
                }
            }

            dismissWelcome() {
                localStorage.setItem('gbs-hub-visited', 'true');
                this.elements.welcomeBanner.classList.remove('show');
                this.addTourTriggerToHeader();
            }

            addTourTriggerToHeader() {
                // Add a small tour button to the header
                const header = document.querySelector('header');
                if (header && !document.getElementById('header-tour-btn')) {
                    const tourBtn = document.createElement('button');
                    tourBtn.id = 'header-tour-btn';
                    tourBtn.className = 'text-blue-600 hover:text-blue-800 text-sm font-medium ml-4';
                    tourBtn.innerHTML = '🎯 Take Tour';
                    tourBtn.addEventListener('click', () => this.startTour());
                    
                    const headerContent = header.querySelector('h1').parentElement;
                    headerContent.style.position = 'relative';
                    tourBtn.style.position = 'absolute';
                    tourBtn.style.top = '10px';
                    tourBtn.style.right = '10px';
                    headerContent.appendChild(tourBtn);
                }
            }

            startTour() {
                if (!this.tourData) return;

                this.isActive = true;
                this.currentStep = 0;
                
                // Hide welcome banner
                this.elements.welcomeBanner.classList.remove('show');
                
                // Show overlay
                this.elements.overlay.classList.add('active');
                
                // Prevent scrolling during tour
                document.body.style.overflow = 'hidden';
                
                this.showCurrentStep();
            }

            showCurrentStep() {
                if (!this.tourData || !this.isActive) return;

                const step = this.tourData.tour.steps[this.currentStep];
                const totalSteps = this.tourData.tour.steps.length;

                // Update content
                this.elements.title.textContent = step.title;
                this.elements.content.textContent = step.content;
                this.elements.stepCounter.textContent = `${this.currentStep + 1} of ${totalSteps}`;

                // Update progress bar
                const progress = ((this.currentStep + 1) / totalSteps) * 100;
                this.elements.progressBar.style.width = `${progress}%`;

                // Position tooltip and spotlight
                this.positionTooltipAndSpotlight(step);

                // Execute step action
                this.executeStepAction(step);

                // Update button states
                this.updateButtonStates();

                // Show tooltip with animation
                setTimeout(() => {
                    this.elements.tooltip.classList.add('active');
                }, 100);
            }

            positionTooltipAndSpotlight(step) {
                const targetElement = this.getTargetElement(step.target);
                
                if (!targetElement) {
                    // Center the tooltip if no target
                    this.centerTooltip();
                    this.elements.spotlight.style.display = 'none';
                    return;
                }

                // Show and position spotlight
                this.elements.spotlight.style.display = 'block';
                const rect = targetElement.getBoundingClientRect();
                const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                const scrollLeft = window.pageXOffset || document.documentElement.scrollLeft;

                // Position spotlight
                this.elements.spotlight.style.top = `${rect.top + scrollTop - 8}px`;
                this.elements.spotlight.style.left = `${rect.left + scrollLeft - 8}px`;
                this.elements.spotlight.style.width = `${rect.width + 16}px`;
                this.elements.spotlight.style.height = `${rect.height + 16}px`;

                // Position tooltip relative to target
                this.positionTooltip(rect, step.position);

                // Ensure target is visible
                this.scrollToTarget(targetElement);
            }

            getTargetElement(target) {
                if (target === 'body') return document.body;
                if (target === 'header') return document.querySelector('header');
                return document.querySelector(target);
            }

            positionTooltip(targetRect, position) {
                const tooltip = this.elements.tooltip;
                const tooltipRect = tooltip.getBoundingClientRect();
                const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                const scrollLeft = window.pageXOffset || document.documentElement.scrollLeft;
                
                let top, left;
                
                // Remove existing position classes
                tooltip.classList.remove('position-top', 'position-bottom', 'position-left', 'position-right');
                
                switch (position) {
                    case 'bottom':
                        top = targetRect.bottom + scrollTop + 20;
                        left = targetRect.left + scrollLeft + (targetRect.width / 2) - (300 / 2);
                        tooltip.classList.add('position-bottom');
                        break;
                    case 'top':
                        top = targetRect.top + scrollTop - tooltipRect.height - 20;
                        left = targetRect.left + scrollLeft + (targetRect.width / 2) - (300 / 2);
                        tooltip.classList.add('position-top');
                        break;
                    case 'left':
                        top = targetRect.top + scrollTop + (targetRect.height / 2) - (tooltipRect.height / 2);
                        left = targetRect.left + scrollLeft - 300 - 20;
                        tooltip.classList.add('position-left');
                        break;
                    case 'right':
                        top = targetRect.top + scrollTop + (targetRect.height / 2) - (tooltipRect.height / 2);
                        left = targetRect.right + scrollLeft + 20;
                        tooltip.classList.add('position-right');
                        break;
                    case 'center':
                    default:
                        return this.centerTooltip();
                }

                // Ensure tooltip stays within viewport
                const viewport = {
                    width: window.innerWidth,
                    height: window.innerHeight
                };

                left = Math.max(20, Math.min(left, viewport.width - 320));
                top = Math.max(20, Math.min(top, viewport.height - 200));

                tooltip.style.top = `${top}px`;
                tooltip.style.left = `${left}px`;
            }

            centerTooltip() {
                const tooltip = this.elements.tooltip;
                tooltip.classList.remove('position-top', 'position-bottom', 'position-left', 'position-right');
                tooltip.style.top = '50%';
                tooltip.style.left = '50%';
                tooltip.style.transform = 'translate(-50%, -50%)';
            }

            scrollToTarget(element) {
                if (!element) return;
                
                const rect = element.getBoundingClientRect();
                const isVisible = rect.top >= 0 && rect.bottom <= window.innerHeight;
                
                if (!isVisible) {
                    element.scrollIntoView({ 
                        behavior: 'smooth', 
                        block: 'center',
                        inline: 'center'
                    });
                }
            }

            executeStepAction(step) {
                if (!step.action) return;

                const targetElement = this.getTargetElement(step.target);
                if (!targetElement) return;

                // Remove previous action classes
                targetElement.classList.remove('tour-pulse', 'tour-highlight', 'tour-celebrate');

                switch (step.action.type) {
                    case 'highlight':
                        targetElement.classList.add('tour-highlight');
                        break;
                    case 'pulse':
                        targetElement.classList.add('tour-pulse');
                        break;
                    case 'focus':
                        if (targetElement.focus) {
                            setTimeout(() => targetElement.focus(), 500);
                        }
                        break;
                    case 'celebrate':
                        targetElement.classList.add('tour-celebrate');
                        break;
                }
            }

            updateButtonStates() {
                const isFirstStep = this.currentStep === 0;
                const isLastStep = this.currentStep === this.tourData.tour.steps.length - 1;

                // Previous button
                this.elements.prevBtn.disabled = isFirstStep;
                this.elements.prevBtn.style.opacity = isFirstStep ? '0.5' : '1';

                // Next button
                if (isLastStep) {
                    this.elements.nextBtn.textContent = 'Finish 🎉';
                    this.elements.nextBtn.classList.add('tour-celebrate');
                } else {
                    this.elements.nextBtn.textContent = 'Next →';
                    this.elements.nextBtn.classList.remove('tour-celebrate');
                }

                // Skip button visibility
                const currentStepData = this.tourData.tour.steps[this.currentStep];
                this.elements.skipBtn.style.display = currentStepData.showSkip ? 'block' : 'none';
            }

            nextStep() {
                if (this.currentStep < this.tourData.tour.steps.length - 1) {
                    this.elements.tooltip.classList.remove('active');
                    this.currentStep++;
                    setTimeout(() => this.showCurrentStep(), 150);
                } else {
                    this.completeTour();
                }
            }

            previousStep() {
                if (this.currentStep > 0) {
                    this.elements.tooltip.classList.remove('active');
                    this.currentStep--;
                    setTimeout(() => this.showCurrentStep(), 150);
                }
            }

            skipTour() {
                this.completeTour(true);
            }

            completeTour(skipped = false) {
                this.isActive = false;

                // Clean up animations
                this.cleanupAnimations();

                // Hide overlay
                this.elements.overlay.classList.remove('active');
                this.elements.tooltip.classList.remove('active');

                // Restore scrolling
                document.body.style.overflow = '';

                // Mark as completed
                localStorage.setItem('gbs-hub-tour-completed', 'true');
                localStorage.setItem('gbs-hub-visited', 'true');

                // Analytics tracking
                this.trackTourCompletion(skipped);

                // Show completion message if not skipped
                if (!skipped) {
                    this.showCompletionMessage();
                }
            }

            cleanupAnimations() {
                // Remove all tour-related classes from elements
                const elementsWithTourClasses = document.querySelectorAll('.tour-pulse, .tour-highlight, .tour-celebrate');
                elementsWithTourClasses.forEach(el => {
                    el.classList.remove('tour-pulse', 'tour-highlight', 'tour-celebrate');
                });
            }

            showCompletionMessage() {
                // Show a brief success message
                const message = document.createElement('div');
                message.className = 'fixed top-4 right-4 bg-green-500 text-white p-4 rounded-lg shadow-lg z-50';
                message.innerHTML = `
                    <div class="flex items-center gap-3">
                        <span class="text-2xl">🎉</span>
                        <div>
                            <div class="font-semibold">Tour Complete!</div>
                            <div class="text-sm opacity-90">You're ready to explore the hub</div>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(message);
                
                setTimeout(() => {
                    message.style.transform = 'translateX(400px)';
                    message.style.opacity = '0';
                    setTimeout(() => message.remove(), 300);
                }, 3000);
            }

            handleKeyboard(e) {
                if (!this.isActive) return;

                switch (e.key) {
                    case 'ArrowRight':
                    case ' ':
                        e.preventDefault();
                        this.nextStep();
                        break;
                    case 'ArrowLeft':
                        e.preventDefault();
                        this.previousStep();
                        break;
                    case 'Escape':
                        e.preventDefault();
                        this.skipTour();
                        break;
                }
            }

            trackTourCompletion(skipped) {
                // Track tour completion for analytics
                const data = {
                    completed: !skipped,
                    stepsViewed: this.currentStep + 1,
                    totalSteps: this.tourData.tour.steps.length,
                    completionRate: ((this.currentStep + 1) / this.tourData.tour.steps.length) * 100,
                    timestamp: new Date().toISOString()
                };
                
                console.log('Tour Analytics:', data);
                // This could be sent to analytics service
           
            }

            // Public method to restart tour
            restartTour() {
                localStorage.removeItem('gbs-hub-tour-completed');
                this.startTour();
            }
        }


        // Initialize search when DOM is loaded
        document.addEventListener('DOMContentLoaded', function () {
            window.globalSearch = new GlobalSearch();
            window.whatsNewManager = new WhatsNewManager();
            window.onboardingTour = new OnboardingTour();

            // Add keyboard shortcut (Ctrl/Cmd + K)
            document.addEventListener('keydown', function (e) {
                if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
                    e.preventDefault();
                    document.getElementById('global-search').focus();
                }
                
                // Add tour restart shortcut (Ctrl/Cmd + T)
                if ((e.ctrlKey || e.metaKey) && e.key === 't' && window.onboardingTour) {
                    e.preventDefault();
                    window.onboardingTour.restartTour();
                }
            });
        });
    </script>
    <script src="shared/mobile-menu.js"></script>
    <script src="shared/bookmarks.js"></script>
    <script src="shared/bookmarks-modal.js"></script>
</body>

</html>